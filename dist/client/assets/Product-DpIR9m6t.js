import{z as B,r as n,g as $,l as L,o as U,p as d,c as D,e as o,f as p,h as l,t as V,A as j,y as _,w as v,_ as z,j as F,u as Z,b as r,d as A,k as H}from"./index-ltoyH2x5.js";import{u as q}from"./usePageMeta-CdZLCV4E.js";import{u as G,c as J,s as K,_ as M,P as Q}from"./useSsrState-BTPbnvrO.js";import{_ as W}from"./BackDownAnchor-CA-SbJvr.js";import{C as X}from"./ContactSection-BDu5DZxO.js";import Y from"./NotFound-750xE9KL.js";import{_ as tt}from"./CatalogSection-Bj8y55A1.js";const et={key:2,class:"product-details"},at={class:"product-details__main-content"},ot={class:"container"},st={class:"product-details__row"},lt={class:"holder"},it={class:"zoom-button"},nt={class:"product-details__main-content__content"},rt={class:"dynamic-content"},ct={key:0,class:"product-details__more-details"},ut={class:"container"},dt={class:"dynamic-content"},mt={name:"AppProduct"},Pt=Object.assign(mt,{setup(ft){const i=n(!0),c=n(!1),a=n({data:{title:"",subtitle:"",description:"",thumbnail:null,details:[]}}),m=n(""),u=n(""),h=n(null),k=n(null),g=B(),P=Z(),C=P?P.proxy:null,E=C?.$prismic,{client:N}=G(),y=g.path||"";y.includes("metalurgia")?(m.value="metallurgy",u.value="Metalurgia"):y.includes("construcao-civil")?(m.value="civil-building",u.value="Construção Civil"):y.includes("ferramentas-ouro")&&(m.value="gold-tools",u.value="Ferramentas ouro");function b(e){return e?Array.isArray(e)?e.map(t=>t.text||"").join(" ").trim():typeof e=="string"?e:"":""}const R=$(()=>{const e=b(a.value?.data?.title)||"Produto";return`${u.value?`${u.value}: `:""}${e} | INDFER - Ferramentas diamantadas`}),S=$(()=>b(a.value?.data?.subtitle)||"Detalhes do produto INDFER");q({title:R,description:S});async function I(e,t=null){i.value=!0,c.value=!1;try{const s=t||E?.client||C?.$prismic?.client;if(!s)throw new Error("Prismic client not available");const f=await s.getByUID("produto",e);if(f){a.value=f,i.value=!1;return}i.value=!1,c.value=!0}catch(s){console.error(s),i.value=!1,c.value=!0}}L(async()=>{try{const e=g.params.id;if(!e){c.value=!0,i.value=!1;return}const t=N||J();if(t)try{const s=await I(e,t);K("product",a.value)}catch(s){console.error("[Product][onServerPrefetch] getProductData error:",s)}}catch{}});function x(e){const s={productImageDetail:h,contactForm:k}[e];s&&s.value&&typeof s.value.showModal=="function"&&s.value.showModal(e)}return U(()=>{const e=g.params.id;if(!e){c.value=!0,i.value=!1;return}I(e)}),(e,t)=>{const s=_("PrismicImage"),f=_("font-awesome-icon"),w=_("PrismicText"),T=_("PrismicRichText");return i.value?(r(),d(Q,{key:0})):c.value?(r(),d(Y,{key:1})):(r(),D("div",et,[o("section",{class:j("product-details_header product-details_header--"+m.value)},[o("h1",null,V(u.value),1)],2),o("section",at,[o("div",ot,[l(M,{backLink:"products"}),o("div",st,[o("div",{onClick:t[0]||(t[0]=O=>x("productImageDetail")),class:"product-details__main-content__media"},[o("div",lt,[l(s,{field:a.value.data.thumbnail},null,8,["field"]),o("div",it,[l(f,{icon:"fa-solid fa-magnifying-glass"})])]),t[2]||(t[2]=o("legend",null,"Imagem meramente ilustrativa*",-1))]),o("div",nt,[o("div",rt,[l(w,{field:a.value.data.title,wrapper:"h3",fallback:"No content"},null,8,["field"]),a.value.data.subtitle?(r(),d(w,{key:0,field:a.value.data.subtitle,wrapper:"h4",fallback:"No content"},null,8,["field"])):p("",!0),l(T,{field:a.value.data.description},null,8,["field"])]),l(z,{onClick:t[1]||(t[1]=O=>x("contactForm"))},{default:v(()=>[...t[3]||(t[3]=[A("FAZER ORÇAMENTO",-1)])]),_:1}),a.value.data.details&&a.value.data.details.length?(r(),d(W,{key:0,type:"secondary-orange"},{default:v(()=>[...t[4]||(t[4]=[A("VISUALIZAR MAIS DETALHES",-1)])]),_:1})):p("",!0)])])]),l(F,{id:"product-image-detail-modal",ref_key:"productImageDetail",ref:h},{default:v(()=>[a.value?(r(),d(s,{key:0,field:a.value.data.thumbnail},null,8,["field"])):p("",!0)]),_:1},512),l(F,{isContactForm:!0,id:"contact-form-modal",ref_key:"contactForm",ref:k},{default:v(()=>[t[5]||(t[5]=o("div",{class:"category-block"},[o("h3",{class:"category-title"},"SOLICITE UM ORÇAMENTO")],-1)),l(H,{formId:"product-page-form"})]),_:1},512)]),a.value.data.details&&a.value.data.details.length?(r(),D("section",ct,[o("div",ut,[o("div",dt,[t[6]||(t[6]=o("h3",null,"Detalhamento Técnico",-1)),l(T,{field:a.value.data.details},null,8,["field"])]),l(M,{backLink:"products"})])])):p("",!0),l(tt),l(X)]))}}});export{Pt as default};
